let squares = [{
        "id": 0,
        "name": "GO",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 1,
        "name": "Mediterranean Avenue",
        "price": 60,
        "owner": undefined,
        "groupColor": "brown",
        "groupIDs": [
            1,
            3
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 2,
        "rent1": 10,
        "rent2": 30,
        "rent3": 90,
        "rent4": 160,
        "rent5": 250,
        "housePrice": 50,
        "mortage": false
    },
    {
        "id": 2,
        "name": "Community Chest",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 3,
        "name": "Baltic Avenue",
        "price": 60,
        "owner": undefined,
        "groupColor": "brown",
        "groupIDs": [
            1,
            3
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 4,
        "rent1": 20,
        "rent2": 60,
        "rent3": 180,
        "rent4": 320,
        "rent5": 450,
        "housePrice": 50,
        "mortage": false
    },
    {
        "id": 4,
        "name": "City Tax",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 5,
        "name": "Reading Railroad",
        "price": 200,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "groupIDs": [
            5,
            15,
            25,
            35
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 6,
        "name": "Oriental Avenue",
        "price": 100,
        "owner": undefined,
        "groupColor": "lightblue",
        "groupIDs": [
            6,
            8,
            9
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 6,
        "rent1": 30,
        "rent2": 90,
        "rent3": 270,
        "rent4": 400,
        "rent5": 550,
        "housePrice": 50,
        "mortage": false
    },
    {
        "id": 7,
        "name": "Chance",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 8,
        "name": "Vermont Avenue",
        "price": 100,
        "owner": undefined,
        "groupColor": "lightblue",
        "groupIDs": [
            6,
            8,
            9
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 6,
        "rent1": 30,
        "rent2": 90,
        "rent3": 270,
        "rent4": 400,
        "rent5": 550,
        "housePrice": 50,
        "mortage": false
    },
    {
        "id": 9,
        "name": "Connecticut Avenue",
        "price": 120,
        "owner": undefined,
        "groupColor": "lightblue",
        "groupIDs": [
            6,
            8,
            9
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 8,
        "rent1": 40,
        "rent2": 100,
        "rent3": 300,
        "rent4": 450,
        "rent5": 600,
        "housePrice": 50,
        "mortage": false
    },
    {
        "id": 10,
        "name": "Just Visiting",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 11,
        "name": "St. Charles Place",
        "price": 140,
        "owner": undefined,
        "groupColor": "fuchsia",
        "groupIDs": [
            11,
            13,
            14
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 10,
        "rent1": 50,
        "rent2": 150,
        "rent3": 450,
        "rent4": 625,
        "rent5": 750,
        "housePrice": 100,
        "mortage": false
    },
    {
        "id": 12,
        "name": "Electric Company",
        "price": 150,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "groupIDs": [
            12,
            28
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 13,
        "name": "States Avenue",
        "price": 140,
        "owner": undefined,
        "groupColor": "fuchsia",
        "groupIDs": [
            11,
            13,
            14
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 10,
        "rent1": 50,
        "rent2": 150,
        "rent3": 450,
        "rent4": 625,
        "rent5": 750,
        "housePrice": 100,
        "mortage": false
    },
    {
        "id": 14,
        "name": "Virginia Avenue",
        "price": 160,
        "owner": undefined,
        "groupColor": "fuchsia",
        "groupIDs": [
            11,
            13,
            14
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 12,
        "rent1": 60,
        "rent2": 180,
        "rent3": 500,
        "rent4": 700,
        "rent5": 900,
        "housePrice": 100,
        "mortage": false
    },
    {
        "id": 15,
        "name": "Pennsylvania Railroad",
        "price": 200,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "groupIDs": [
            5,
            15,
            25,
            35
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 16,
        "name": "St. James Place",
        "price": 180,
        "owner": undefined,
        "groupColor": "orange",
        "groupIDs": [
            16,
            18,
            19
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 14,
        "rent1": 70,
        "rent2": 200,
        "rent3": 550,
        "rent4": 750,
        "rent5": 950,
        "housePrice": 100,
        "mortage": false
    },
    {
        "id": 17,
        "name": "Community Chest",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 18,
        "name": "Tennessee Avenue",
        "price": 180,
        "owner": undefined,
        "groupColor": "orange",
        "groupIDs": [
            16,
            18,
            19
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 14,
        "rent1": 70,
        "rent2": 200,
        "rent3": 550,
        "rent4": 750,
        "rent5": 950,
        "housePrice": 100,
        "mortage": false
    },
    {
        "id": 19,
        "name": "New York Avenue",
        "price": 200,
        "owner": undefined,
        "groupColor": "orange",
        "groupIDs": [
            16,
            18,
            19
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 16,
        "rent1": 80,
        "rent2": 220,
        "rent3": 600,
        "rent4": 800,
        "rent5": 1000,
        "housePrice": 100,
        "mortage": false
    },
    {
        "id": 20,
        "name": "Free Parking",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 21,
        "name": "Kentucky Avenue",
        "price": 220,
        "owner": undefined,
        "groupColor": "red",
        "groupIDs": [
            21,
            23,
            24
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 18,
        "rent1": 90,
        "rent2": 250,
        "rent3": 700,
        "rent4": 875,
        "rent5": 1050,
        "housePrice": 150,
        "mortage": false
    },
    {
        "id": 22,
        "name": "Chance",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 23,
        "name": "Indiana Avenue",
        "price": 220,
        "owner": undefined,
        "groupColor": "red",
        "groupIDs": [
            21,
            23,
            24
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 18,
        "rent1": 90,
        "rent2": 250,
        "rent3": 700,
        "rent4": 875,
        "rent5": 1050,
        "housePrice": 150,
        "mortage": false
    },
    {
        "id": 24,
        "name": "Illinois Avenue",
        "price": 240,
        "owner": undefined,
        "groupColor": "red",
        "groupIDs": [
            21,
            23,
            24
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 20,
        "rent1": 100,
        "rent2": 300,
        "rent3": 750,
        "rent4": 925,
        "rent5": 1100,
        "housePrice": 150,
        "mortage": false
    },
    {
        "id": 25,
        "name": "B&O Railroad",
        "price": 200,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "groupIDs": [
            5,
            15,
            25,
            35
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 26,
        "name": "Atlantic Avenue",
        "price": 260,
        "owner": undefined,
        "groupColor": "yellow",
        "groupIDs": [
            26,
            27,
            29
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 22,
        "rent1": 110,
        "rent2": 330,
        "rent3": 800,
        "rent4": 975,
        "rent5": 1150,
        "housePrice": 150,
        "mortage": false
    },
    {
        "id": 27,
        "name": "Ventnor Avenue",
        "price": 260,
        "owner": undefined,
        "groupColor": "yellow",
        "groupIDs": [
            26,
            27,
            29
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 22,
        "rent1": 110,
        "rent2": 330,
        "rent3": 800,
        "rent4": 975,
        "rent5": 1150,
        "housePrice": 150,
        "mortage": false
    },
    {
        "id": 28,
        "name": "Water Works",
        "price": 150,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "groupIDs": [
            12,
            28
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 29,
        "name": "Marvin Gardens",
        "price": 280,
        "owner": undefined,
        "groupColor": "yellow",
        "groupIDs": [
            26,
            27,
            29
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 24,
        "rent1": 120,
        "rent2": 360,
        "rent3": 850,
        "rent4": 1025,
        "rent5": 1200,
        "housePrice": 150,
        "mortage": false
    },
    {
        "id": 30,
        "name": "Go to Jail",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 31,
        "name": "Pacific Avenue",
        "price": 300,
        "owner": undefined,
        "groupColor": "green",
        "groupIDs": [
            31,
            32,
            34
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 26,
        "rent1": 130,
        "rent2": 390,
        "rent3": 900,
        "rent4": 1100,
        "rent5": 1275,
        "housePrice": 200,
        "mortage": false
    },
    {
        "id": 32,
        "name": "North Carolina Avenue",
        "price": 300,
        "owner": undefined,
        "groupColor": "green",
        "groupIDs": [
            31,
            32,
            34
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 26,
        "rent1": 130,
        "rent2": 390,
        "rent3": 900,
        "rent4": 1100,
        "rent5": 1275,
        "housePrice": 200,
        "mortage": false
    },
    {
        "id": 33,
        "name": "Community Chest",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 34,
        "name": "Pennsylvania Avenue",
        "price": 320,
        "owner": undefined,
        "groupColor": "green",
        "groupIDs": [
            31,
            32,
            34
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 28,
        "rent1": 150,
        "rent2": 450,
        "rent3": 1000,
        "rent4": 1200,
        "rent5": 1400,
        "housePrice": 200,
        "mortage": false
    },
    {
        "id": 35,
        "name": "Short Line",
        "price": 200,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "groupIDs": [
            5,
            15,
            25,
            35
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 36,
        "name": "Chance",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 37,
        "name": "Park Place",
        "price": 350,
        "owner": undefined,
        "groupColor": "blue",
        "groupIDs": [
            37,
            39
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 35,
        "rent1": 175,
        "rent2": 500,
        "rent3": 1100,
        "rent4": 1300,
        "rent5": 1500,
        "housePrice": 200,
        "mortage": false
    },
    {
        "id": 38,
        "name": "LUXURY TAX",
        "price": 0,
        "owner": undefined,
        "groupColor": "#FFFFFF",
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 0,
        "rent1": 0,
        "rent2": 0,
        "rent3": 0,
        "rent4": 0,
        "rent5": 0,
        "housePrice": 0,
        "mortage": false
    },
    {
        "id": 39,
        "name": "Boardwalk",
        "price": 400,
        "owner": undefined,
        "groupColor": "blue",
        "groupIDs": [
            37,
            39
        ],
        "canBuyHouse": false,
        "house": 0,
        "hotel": 0,
        "groupIDsSameOwner": [],
        "baseRent": 50,
        "rent1": 200,
        "rent2": 600,
        "rent3": 1400,
        "rent4": 1700,
        "rent5": 2000,
        "housePrice": 200,
        "mortage": false
    }
];
// CALCULATE RENT

// RETURNS RENT, EXCEPT UTILITY THAT RETURN VALUE THAT NEEDS TO BE MULTIPLIED BY DICE RESULT
let calculateRent = (property) => {
    if (property.id === 12 || property.id === 28) {
        // UTILITY
        if (squares[12].owner === squares[28].owner) {
            return 10;
        } else {
            return 4;
        }
    } else if (property.id === 5 || property.id === 15 || property.id === 25 || property.id === 35) {
        // RAILROAD
        let arrayOfRailroads = [squares[5], squares[15], squares[25], squares[35]];
        let counter = 0;
        for (let railroad of arrayOfRailroads) {

            if (property.owner === railroad.owner) {
                counter++;
            }
        }
        if (comesFromCard === false) {
            if (counter === 1) {
                return 25;
            } else if (counter === 2) {
                return 50;
            } else if (counter === 3) {
                return 100;
            } else if (counter === 4) {
                return 200;
            }
        } else if (comesFromCard === true) {
            if (counter === 1) {
                return 50;
            } else if (counter === 2) {
                return 100;
            } else if (counter === 3) {
                return 200;
            } else if (counter === 4) {
                return 400;
            }
        }

    } else {

        switch (property.house) {
            case 2:
                return property.rent2;
                break;
            case 3:
                return property.rent3;
                break;
            case 4:
                return property.rent4;
                break;
            case 5:
                return property.rent5;
                break;
            default:
                return property.rent1;
        }
    }
};

// EVENT LISTENER TO PROPERTY SQUARES
let propertiesIds = [];
let arrayOfProperties = squares.filter(property => property.price !== 0);
for (let property of arrayOfProperties) {
    propertiesIds.push(property.id);
}

for (let id of propertiesIds) {
    $(`#square-${id}`).click(function () {
        let getId = this.id.split("-")[1];
        let selectedProperty = squares[getId];
        createDeedCard(selectedProperty);
    });
}
// CREATE DEED CARD
const clearDeedContainer = () => {
    document.getElementById(`title-deed-container`).innerHTML = ``;
}

let createDeedCard = (property) => { // OBJECT
    clearDeedContainer();

    if (property.id === 12 || property.id === 28) {
        let utilityImgSubstring;
        property.name.includes("Electric") ? utilityImgSubstring = "electric-company" : utilityImgSubstring = "water-works";
        // UTILITY
        document.getElementById(`title-deed-container`).innerHTML =
            `<div id="property_${property.id}" 
            <div class="title-deed">
                <img class="title-deed-img" src="media/${utilityImgSubstring}-icon.svg">
                <div class="title-deed__header">${property.name.toUpperCase()}</div>
                <div class="title-deed__utility-descripton">
                    <div>If one "Utility" is owned rent is 4 times amount shown on dice.</div>
                    <div>If both "Utilities are owned rent is 10 times amount shown on dice.</div>
                </div>
            </div>
            <ul class="title-deed-options">
                <li id="title-deed-close">Close</li>
                <li id="title-deed-mortage">Set mortage</li>
            </ul>
        </div>`
        $("#title-deed-buy-house").hide();
        $("#title-deed-sell-house").hide();
    } else if (property.id === 5 || property.id === 15 || property.id === 25 || property.id === 35) {
        // RAIL ROAD
        document.getElementById(`title-deed-container`).innerHTML =

            `<div id="property_${property}" 
        
            <div class="title-deed">
            <img class="title-deed-img" src="media/train-icon.svg">
                    <div class="title-deed__info">
                    <div class="title-deed__header">${property.name.toUpperCase()}</div>
                        <div>RENT $25</div>
                        <div class="title-deed__houses-prices">
                            <div>If 2 R.R.'s are owned</div>
                            <div>$50</div>
                            <div>If 3 R.R.'s are owned</div>
                            <div>$100</div>
                            <div>If 4 R.R.'s are owned</div>
                            <div>$200</div>
                        </div>
                        <div>Mortage Value FALTA</div>
                    </div>            
            </div>

            <ul class="title-deed-options">
                <li id="title-deed-close">Close</li>
                <li id="title-deed-mortage">Set mortage</li>
                <li id="title-deed-buy-house">Buy House</li>
                <li id="title-deed-sell-house">Sell House</li>
            </ul>

        </div>`
        $("#title-deed-buy-house").hide();
        $("#title-deed-sell-house").hide();
    } else {
        // REGULAR PROPERTY
        document.getElementById(`title-deed-container`).innerHTML =

            `<div id="property_${property}" 
        
            <div class="title-deed">

                <div class="title-deed__header color-${property.groupColor}">${property.name.toUpperCase()}</div>
                    <div class="title-deed__info">
                        <div>RENT $${property.baseRent}</div>
                        <div class="title-deed__houses-prices">
                            <div>With 1 House</div>
                            <div>$${property.rent1}</div>
                            <div>With 2 Houses</div>
                            <div>$${property.rent2}</div>
                            <div>With 3 Houses</div>
                            <div>$${property.rent3}</div>
                            <div>With 4 Houses</div>
                            <div>$${property.rent4}</div>
                        </div>
                        <div>With HOTEL $${property.rent5}</div>
                        <div>Mortage Value FALTA</div>
                        <div>Houses Cost $${property.housePrice} each</div>
                        <div>Hoteles, $${property.housePrice}, plus 4 Houses</div>
                    </div>
                <div class="title-deed__bottom-line">If player owns ALL the Lots of any Color Group, the rent is
                Doubled on Uninproved Lots in that
                group.</div>
            
            </div>

            <ul class="title-deed-options">
                <li id="title-deed-close">Close</li>
                <li id="title-deed-mortage">Set mortage</li>
                <li id="title-deed-sell-property">Sell property</li>
                <li id="title-deed-buy-house">Buy House</li>
                <li id="title-deed-sell-house">Sell House</li>
            </ul>

        </div>`

        // TITLE DEED OPTIONS
        $("#title-deed-buy-house").hide();
        $("#title-deed-sell-house").hide();
        $("#title-deed-sell-property").hide();
        if (checkAllOwnersTheSame(property)) {

            if (checkPropertyCanBuyHouse(property)) {
                $(`#title-deed-buy-house`).show();
                $(`#title-deed-buy-house`).click(function () {
                    buyHouse(property);
                    createDeedCard(property);
                });
            }

            if (checkPropertyCanSellHouse(property)) {
                $(`#title-deed-sell-house`).show();
                $(`#title-deed-sell-house`).click(function () {
                    sellHouse(property);
                    createDeedCard(property);
                });
            }
        }

        if (property.house === 0) {
            $(`#title-deed-sell-property`).show();
            $(`#title-deed-sell-property`).click(function () {
                sellPropertyDisplay(property);
            });
        }

        if (property.house === 4) {
            $(`#title-deed-buy-house`).html("Buy hotel");
        } else if (property.house === 5) {
            $(`#title-deed-sell-house`).html("Sell hotel");
        }
    }

    // CLOSE TITLE DEED
    $(`#title-deed-close`).click(function () {
        clearDeedContainer();
    });
    console.log(property.owner)
    if (property.owner === undefined) {
        $(`#title-deed-mortage`).hide();
    }
}


// TODO SELL OR AUCTION PROPERTY

let sellPropertyDisplay = (property) => {
    let filteredArray = players.filter(function (player) {
        return player.id !== property.owner;
    });


    console.log(filteredArray)
    $(`.board`).append(`
    <div class="sell-property-container">
    <div class="sell-property-popup">
        <p class="sell-property-title">${players[property.owner].name}, do you want to sell ${property.name}?</p>
        <p>Who are you selling it to?<p>
        <form class="sell-property-buyer">
        </form>
    
    </div>
    </div>`);

    for (let player of filteredArray) {
        $(".sell-property-buyer").append(
            `<input type="radio" id="player_${player.id}_wants_to_buy" name="buyer" value="${player.id}" required">
            <label for="value-${player.id}">${player.name}</label><br>`
        )
    }

    $(".sell-property-buyer").append(`
        <label for="amoun">How much will he or she pay?:</label>
        <input type="text" id="sale_amount" name="sale-amount" required
        size="10">
       <input id="confirm_sale" type="submit" value="Sell property">`
    )

    $("#confirm_sale").click(function (event) {
        console.log(property.owner);
        event.preventDefault();
        let transactionInfo = $('.sell-property-buyer').serializeArray();
        console.log(transactionInfo);
        players[property.owner].transaction(parseInt(transactionInfo[1].value));
        console.log(transactionInfo[1].value);
        property.owner = transactionInfo[0].value;
        players[property.owner].transaction(parseInt(-transactionInfo[1].value));
        console.log(property.owner);
        removeSellPropertyDisplay();
    })

    $(".sell-property-popup").append(`<div id="close-sell-property-container">Close</div>`);

    $("#close-sell-property-container").click(function () {
        removeSellPropertyDisplay();
    });


    $("#player_bank_wants_to_buy").change(function () {
        $("#sale_amount").val(property.price);
    });

}

let removeSellPropertyDisplay = () => {
    $(".sell-property-container").remove();
}


// VALIDATE HOUSE BUY & SELL

let checkAllOwnersTheSame = (property) => { // OBJECT
    let allOwnersTheSame = true;
    let groupPropertiesIds = property.groupIDs;
    let groupPropertiesOwners = [];
    for (let property of groupPropertiesIds) {
        groupPropertiesOwners.push(squares[property].owner);
    }
    for (owner of groupPropertiesOwners) {
        if (owner !== property.owner || owner === undefined) {
            allOwnersTheSame = false;
        }
    }
    return allOwnersTheSame;
}

let checkPropertyCanBuyHouse = (property) => { // (OBJECT)
    let canBuy = true;
    let groupPropertiesIds = property.groupIDs;
    let groupProperties = [];
    for (let property of groupPropertiesIds) {
        groupProperties.push(squares[property]);
    }
    for (let i = 0; i < groupProperties.length; i++) {
        if (property.house >= 5 || property.house > groupProperties[i].house) {
            canBuy = false;
        }
    }
    return canBuy;
}

let checkPropertyCanSellHouse = (property) => { // (OBJECT)
    let canSell = true;
    let groupPropertiesIds = property.groupIDs;
    let groupProperties = [];
    for (let property of groupPropertiesIds) {
        groupProperties.push(squares[property]);
    }
    for (let i = 0; i < groupProperties.length; i++) {
        if (property.house <= 0 || property.house < groupProperties[i].house) {
            canSell = false;
        }
    }
    return canSell;
}

// PERFORM HOUSE BUY & SELL
const buyHouse = (property) => { // (OBJECT)
    property.house += 1;
    players[property.owner].transaction(-property.housePrice);
    updateHousesDisplay(property);
}

const sellHouse = (property) => { // (OBJECT)
    property.house -= 1;
    players[property.owner].transaction(property.housePrice / 2);
    updateHousesDisplay(property);
}

const updateHousesDisplay = (property) => { // (OBJECT)
    let squareColor = $(`#square-${property.id}`).children(".square-color");
    squareColor.empty();
    if (property.house === 0) {
        // DO NOTHING
    } else if (property.house > 0 && property.house < 5) {
        for (let i = 0; i < property.house; i++) {
            squareColor.append(`<img class="house-icon" src="media/house-icon.svg" alt="">`);
        }
    } else if (property.house === 5) {
        squareColor.append(`<img class="hotel-icon" src="media/hotel-icon.svg" alt="">`);
    } else {
        console.error("House doesn't have a correct number of houses");
    }
}

const updateAllHousesDisplay = () => {
    for (property of arrayOfProperties) {
        updateHousesDisplay(property);
    }
}